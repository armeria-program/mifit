<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>umtzlib.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.8.1 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="annotated.html">Data Structures</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Data Fields</a> &nbsp; <a class="qindex" href="globals.html">Globals</a> &nbsp; </center>
<hr><h1>umtzlib.h</h1><a href="umtzlib_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00006 <font class="preprocessor">#ifndef CCP4_UMTZLIB_INC</font>
00007 <font class="preprocessor"></font><font class="preprocessor">#define CCP4_UMTZLIB_INC</font>
00008 <font class="preprocessor"></font>
00009 <font class="preprocessor">#include &lt;math.h&gt;</font>
00010 <font class="preprocessor">#include "library.h"</font>
00011 
00012 <font class="comment">/* define mtz properties */</font>
00013 
<a name="l00014"></a><a class="code" href="umtzlib_8h.html#a0">00014</a> <font class="preprocessor">#define MTZRECLEN 80</font>
<a name="l00015"></a><a class="code" href="umtzlib_8h.html#a1">00015</a> <font class="preprocessor"></font><font class="preprocessor">#define MTZBATCHR (3*MTZRECLEN)</font>
<a name="l00016"></a><a class="code" href="umtzlib_8h.html#a2">00016</a> <font class="preprocessor"></font><font class="preprocessor">#define MTZBATINT 29</font>
<a name="l00017"></a><a class="code" href="umtzlib_8h.html#a3">00017</a> <font class="preprocessor"></font><font class="preprocessor">#define MTZBATFLT 156</font>
<a name="l00018"></a><a class="code" href="umtzlib_8h.html#a4">00018</a> <font class="preprocessor"></font><font class="preprocessor">#define MTZBATLEN ( MTZBATCHR + 4*(MTZBATINT+MTZBATFLT) )</font>
<a name="l00019"></a><a class="code" href="umtzlib_8h.html#a5">00019</a> <font class="preprocessor"></font><font class="preprocessor">#define MTZDATAOFF 20</font>
00020 <font class="preprocessor"></font>
00021 <font class="keyword">typedef</font> <font class="keyword">struct </font><a class="code" href="structumtz__hdr__.html">umtz_hdr_</a> {
<a name="l00022"></a><a class="code" href="structumtz__hdr__.html#m0">00022</a>   <font class="keywordtype">char</font> data[MTZRECLEN];
00023 } <a class="code" href="structumtz__hdr__.html">umtz_hdr</a>;
00024 
00025 <font class="keyword">typedef</font> <font class="keyword">struct </font><a class="code" href="structumtz__bat__.html">umtz_bat_</a> {
<a name="l00026"></a><a class="code" href="structumtz__bat__.html#m0">00026</a>   <font class="keywordtype">char</font>  cdata[3*MTZRECLEN];
<a name="l00027"></a><a class="code" href="structumtz__bat__.html#m1">00027</a>   <font class="keywordtype">int</font>   idata[MTZBATINT];
<a name="l00028"></a><a class="code" href="structumtz__bat__.html#m2">00028</a>   <font class="keywordtype">float</font> fdata[MTZBATFLT];
00029 } <a class="code" href="structumtz__bat__.html">umtz_bat</a>;
00030 
00031 <font class="comment">/* define a list of header lines */</font>
00032 
00033 <font class="keyword">typedef</font> <font class="keyword">struct </font><a class="code" href="structumtz__list__.html">umtz_list_</a> {
<a name="l00034"></a><a class="code" href="structumtz__list__.html#m0">00034</a>   <font class="keywordtype">int</font> size, capacity;
<a name="l00035"></a><a class="code" href="structumtz__list__.html#m2">00035</a>   <font class="keywordtype">void</font>* data;
00036 } <a class="code" href="structumtz__list__.html">umtz_list</a>;
00037 
00038 <font class="comment">/* now define a umtz file i/o object */</font>
00039 
00040 <font class="keyword">typedef</font> <font class="keyword">struct </font><a class="code" href="structumtzfile__.html">umtzfile_</a> {
<a name="l00041"></a><a class="code" href="structumtzfile__.html#m1">00041</a>   <font class="keywordtype">char</font> filename[200], mode[4];
<a name="l00042"></a><a class="code" href="structumtzfile__.html#m4">00042</a>   <font class="keywordtype">int</font> iunit, ncol, nrow;
<a name="l00043"></a><a class="code" href="structumtzfile__.html#m5">00043</a>   <font class="keywordtype">float</font> mnf;
<a name="l00044"></a><a class="code" href="structumtzfile__.html#m6">00044</a>   <a class="code" href="structumtz__list__.html">umtz_list</a> headers;
<a name="l00045"></a><a class="code" href="structumtzfile__.html#m7">00045</a>   <a class="code" href="structumtz__list__.html">umtz_list</a> history;
<a name="l00046"></a><a class="code" href="structumtzfile__.html#m8">00046</a>   <a class="code" href="structumtz__list__.html">umtz_list</a> batches;
00047 } <a class="code" href="structumtzfile__.html">umtzfile</a>;
00048 
00049 
00050 <font class="comment">/* define unix-like i/o functions */</font>
00051 
00052 <a class="code" href="structumtzfile__.html">umtzfile</a>* <a class="code" href="umtzlib_8h.html#a10">umtz_open</a>( <font class="keyword">const</font> <font class="keywordtype">char</font>* filename, <font class="keyword">const</font> <font class="keywordtype">char</font>* mode );
00053 <font class="keywordtype">void</font> <a class="code" href="umtzlib_8h.html#a11">umtz_close</a>( <a class="code" href="structumtzfile__.html">umtzfile</a>* file );
00054 
00055 <font class="comment">/* accessor methods */</font>
00056 
00057 <font class="keywordtype">int</font> <a class="code" href="umtzlib_8h.html#a12">umtz_num_cols</a>( <font class="keyword">const</font> <a class="code" href="structumtzfile__.html">umtzfile</a>* file );
00058 <font class="keywordtype">int</font> <a class="code" href="umtzlib_8h.html#a13">umtz_num_rows</a>( <font class="keyword">const</font> <a class="code" href="structumtzfile__.html">umtzfile</a>* file );
00059 <font class="keywordtype">int</font> <a class="code" href="umtzlib_8h.html#a14">umtz_num_head</a>( <font class="keyword">const</font> <a class="code" href="structumtzfile__.html">umtzfile</a>* file );
00060 <font class="keywordtype">int</font> <a class="code" href="umtzlib_8h.html#a15">umtz_num_hist</a>( <font class="keyword">const</font> <a class="code" href="structumtzfile__.html">umtzfile</a>* file );
00061 <font class="keywordtype">float</font> <a class="code" href="umtzlib_8h.html#a16">umtz_mnf</a>( <font class="keyword">const</font> <a class="code" href="structumtzfile__.html">umtzfile</a>* file );
00062 <font class="keywordtype">int</font> <a class="code" href="umtzlib_8h.html#a17">umtz_ismnf</a>( <font class="keyword">const</font> <a class="code" href="structumtzfile__.html">umtzfile</a>* file, <font class="keywordtype">float</font> f );
00063 
00064 <a class="code" href="structumtz__hdr__.html">umtz_hdr</a>* <a class="code" href="umtzlib_8h.html#a18">umtz_first_head</a>( <font class="keyword">const</font> <a class="code" href="structumtzfile__.html">umtzfile</a>* file );
00065 <a class="code" href="structumtz__hdr__.html">umtz_hdr</a>* <a class="code" href="umtzlib_8h.html#a19">umtz_first_hist</a>( <font class="keyword">const</font> <a class="code" href="structumtzfile__.html">umtzfile</a>* file );
00066 <a class="code" href="structumtz__bat__.html">umtz_bat</a>* <a class="code" href="umtzlib_8h.html#a20">umtz_first_bats</a>( <font class="keyword">const</font> <a class="code" href="structumtzfile__.html">umtzfile</a>* file );
00067 <a class="code" href="structumtz__hdr__.html">umtz_hdr</a>* <a class="code" href="umtzlib_8h.html#a21">umtz_last_head</a>( <font class="keyword">const</font> <a class="code" href="structumtzfile__.html">umtzfile</a>* file );
00068 <a class="code" href="structumtz__hdr__.html">umtz_hdr</a>* <a class="code" href="umtzlib_8h.html#a22">umtz_last_hist</a>( <font class="keyword">const</font> <a class="code" href="structumtzfile__.html">umtzfile</a>* file );
00069 <a class="code" href="structumtz__bat__.html">umtz_bat</a>* <a class="code" href="umtzlib_8h.html#a23">umtz_last_bats</a>( <font class="keyword">const</font> <a class="code" href="structumtzfile__.html">umtzfile</a>* file );
00070 <font class="keywordtype">int</font> <a class="code" href="umtzlib_8h.html#a24">umtz_keymatch</a>( <font class="keyword">const</font> <font class="keywordtype">char</font>* hdr, <font class="keyword">const</font> <font class="keywordtype">char</font>* key );
00071 <font class="keywordtype">void</font> <a class="code" href="umtzlib_8h.html#a25">umtz_add_head</a>( <a class="code" href="structumtzfile__.html">umtzfile</a>* file, <font class="keyword">const</font> <font class="keywordtype">char</font>* hdr );
00072 <font class="keywordtype">void</font> <a class="code" href="umtzlib_8h.html#a26">umtz_add_hist</a>( <a class="code" href="structumtzfile__.html">umtzfile</a>* file, <font class="keyword">const</font> <font class="keywordtype">char</font>* hdr );
00073 <font class="keywordtype">void</font> <a class="code" href="umtzlib_8h.html#a27">umtz_add_bats</a>( <a class="code" href="structumtzfile__.html">umtzfile</a>* file, <font class="keyword">const</font> <font class="keywordtype">char</font>* cdata, <font class="keyword">const</font> <font class="keywordtype">int</font>* idata, <font class="keyword">const</font> <font class="keywordtype">float</font>* fdata );
00074 
00075 <font class="keywordtype">void</font> <a class="code" href="umtzlib_8h.html#a28">umtz_seek_row</a>( <font class="keyword">const</font> <a class="code" href="structumtzfile__.html">umtzfile</a>* file, <font class="keyword">const</font> <font class="keywordtype">int</font> n );
00076 <font class="keywordtype">void</font> <a class="code" href="umtzlib_8h.html#a29">umtz_get_row</a>( <font class="keyword">const</font> <a class="code" href="structumtzfile__.html">umtzfile</a>* file, <font class="keywordtype">float</font>* fdata );
00077 <font class="keywordtype">void</font> <a class="code" href="umtzlib_8h.html#a30">umtz_add_row</a>( <a class="code" href="structumtzfile__.html">umtzfile</a>* file, <font class="keyword">const</font> <font class="keywordtype">float</font>* fdata );
00078 
00079 <font class="keywordtype">void</font> <a class="code" href="umtzlib_8h.html#a31">umtz_get_cell</a>( <font class="keyword">const</font> <a class="code" href="structumtzfile__.html">umtzfile</a>* file, <font class="keyword">const</font> <font class="keywordtype">int</font> ixtl, <font class="keywordtype">float</font>* cell );
00080 <font class="keywordtype">void</font> <a class="code" href="umtzlib_8h.html#a32">umtz_cell_metric</a>( <font class="keyword">const</font> <font class="keywordtype">float</font>* cell, <font class="keywordtype">float</font>* metric );
00081 
00082 <font class="keywordtype">int</font> <a class="code" href="umtzlib_8h.html#a33">umtz_num_head_type</a>( <font class="keyword">const</font> <a class="code" href="structumtzfile__.html">umtzfile</a>* file, <font class="keywordtype">char</font>* head );
00083 
00084 <font class="comment">/* internal functions */</font>
00085 
00086 <font class="keywordtype">void</font> <a class="code" href="umtzlib_8h.html#a34">umtz_make_rec</a>( <a class="code" href="structumtz__list__.html">umtz_list</a>* l, <font class="keyword">const</font> <font class="keywordtype">int</font> rec_len );
00087 <font class="keywordtype">void</font> <a class="code" href="umtzlib_8h.html#a35">umtz_copy_pad</a>( <font class="keywordtype">char</font>* d, <font class="keyword">const</font> <font class="keywordtype">char</font>* s, <font class="keyword">const</font> <font class="keywordtype">int</font> rec_len  );
00088 <font class="keywordtype">void</font> <a class="code" href="umtzlib_8h.html#a36">umtz_rewrite_headers_ranges</a>( <a class="code" href="structumtzfile__.html">umtzfile</a>* file );
00089 <font class="keywordtype">void</font> <a class="code" href="umtzlib_8h.html#a37">umtz_rewrite_headers_legacy</a>( <a class="code" href="structumtzfile__.html">umtzfile</a>* file );
00090 
00091 <font class="preprocessor">#endif</font>
</font></pre></div><hr><address><small>Generated at Mon Jan 7 17:06:26 2002 by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.8.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
