<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mmtzlib.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.8.1 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="annotated.html">Data Structures</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Data Fields</a> &nbsp; <a class="qindex" href="globals.html">Globals</a> &nbsp; </center>
<hr><h1>mmtzlib.h File Reference</h1>The mini-mtz user-level library. 
<a href="#_details">More...</a>
<p>
<code>#include "<a class="el" href="umtzlib_8h-source.html">umtzlib.h</a>"</code><br>

<p>
<a href="mmtzlib_8h-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Data Structures</h2></td></tr>
<tr><td nowrap align=right valign=top>struct &nbsp;</td><td valign=bottom><a class="el" href="structmmtz__column__.html">mmtz_column_</a></td></tr>
<tr><td nowrap align=right valign=top>struct &nbsp;</td><td valign=bottom><a class="el" href="structmmtz__crystal__.html">mmtz_crystal_</a></td></tr>
<tr><td nowrap align=right valign=top>struct &nbsp;</td><td valign=bottom><a class="el" href="structmmtz__dataset__.html">mmtz_dataset_</a></td></tr>
<tr><td colspan=2><br><h2>Typedefs</h2></td></tr>
<tr><td nowrap align=right valign=top>typedef <a class="el" href="umtzlib_8h.html#a9">umtzfile</a>*&nbsp;</td><td valign=bottom><a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a></td></tr>
<tr><td nowrap align=right valign=top>typedef struct <a class="el" href="structmmtz__column__.html">mmtz_column_</a> &nbsp;</td><td valign=bottom><a class="el" href="mmtzlib_8h.html#a1">mmtz_column</a></td></tr>
<tr><td nowrap align=right valign=top>typedef struct <a class="el" href="structmmtz__dataset__.html">mmtz_dataset_</a> &nbsp;</td><td valign=bottom><a class="el" href="mmtzlib_8h.html#a2">mmtz_dataset</a></td></tr>
<tr><td nowrap align=right valign=top>typedef struct <a class="el" href="structmmtz__crystal__.html">mmtz_crystal_</a> &nbsp;</td><td valign=bottom><a class="el" href="mmtzlib_8h.html#a3">mmtz_crystal</a></td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a>&nbsp;</td><td valign=bottom><a class="el" href="mmtzlib_8h.html#a4">mmtz_open</a> (const char *filename, const char *mode)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="mmtzlib_8h.html#a5">mmtz_close</a> (<a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> file)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="mmtzlib_8h.html#a6">mmtz_copy_headers</a> (<a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> dest, const <a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> src)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="mmtzlib_8h.html#a7">mmtz_num_rows</a> (const <a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> file)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="mmtzlib_8h.html#a8">mmtz_num_cols</a> (const <a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> file)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="mmtzlib_8h.html#a9">mmtz_num_datasets</a> (const <a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> file)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="mmtzlib_8h.html#a10">mmtz_get_num_symops</a> (const <a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> file)</td></tr>
<tr><td nowrap align=right valign=top>char*&nbsp;</td><td valign=bottom><a class="el" href="mmtzlib_8h.html#a11">mmtz_get_symop</a> (const <a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> file, const int isym, char *symop)</td></tr>
<tr><td nowrap align=right valign=top>float*&nbsp;</td><td valign=bottom><a class="el" href="mmtzlib_8h.html#a12">mmtz_get_cell</a> (const <a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> file, float *cell)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="mmtzlib_8h.html#a13">mmtz_get_setxtl</a> (const <a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> file, const int icol, <a class="el" href="mmtzlib_8h.html#a2">mmtz_dataset</a> *set, <a class="el" href="mmtzlib_8h.html#a3">mmtz_crystal</a> *xtl)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="mmtzlib_8h.html#a14">mmtz_get_column</a> (const <a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> file, const int icol, <a class="el" href="mmtzlib_8h.html#a1">mmtz_column</a> *col, <a class="el" href="mmtzlib_8h.html#a2">mmtz_dataset</a> *set, <a class="el" href="mmtzlib_8h.html#a3">mmtz_crystal</a> *xtl)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="mmtzlib_8h.html#a15">mmtz_add_column</a> (<a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> file, const <a class="el" href="mmtzlib_8h.html#a1">mmtz_column</a> *col, const <a class="el" href="mmtzlib_8h.html#a2">mmtz_dataset</a> *set, const <a class="el" href="mmtzlib_8h.html#a3">mmtz_crystal</a> *xtl)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="mmtzlib_8h.html#a16">mmtz_init_headers</a> (<a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> file, const char *title, const float cell[6])</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="mmtzlib_8h.html#a17">mmtz_add_sort_header</a> (<a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> file, const char *sortorder)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="mmtzlib_8h.html#a18">mmtz_add_syminf_header</a> (<a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> file, const int nsym, const int nsymp, const char cellcode, const int ccp4_symbol, const char *hm_symbol, const char *pg_symbol)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="mmtzlib_8h.html#a19">mmtz_add_symop_header</a> (<a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> file, const char *symop)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="mmtzlib_8h.html#a20">mmtz_get_row</a> (const <a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> file, float *fdata, int *flags)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="mmtzlib_8h.html#a21">mmtz_add_row</a> (<a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> file, float *fdata, const int *flags)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="mmtzlib_8h.html#a22">mmtz_seek_row</a> (const <a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> file, const int n)</td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
The mini-mtz user-level library.
<p>
This is a simple lightweight library which can be used by application developers to access MTZ files from C, and other languages which can access C APIs.
<p>
Accessing a file is achieved by use of an mmtzfile structure. This structure is allocated by calling the <a class="el" href="mmtzlib_8h.html#a4">mmtz_open</a>() function with a filename and either "r" or "w" for read or write access. Closing the file frees the structure.
<p>
When reading a file, this structure is the queried to obtain information from the MTZ headers. The actual data in the file may be accessed by using the <a class="el" href="mmtzlib_8h.html#a20">mmtz_get_row</a>() function to access the data for each reflection in turn.
<p>
When writing a file, the file is opened, and the headers must be constructed using the 'init' and 'add' functions. Only once construction of the headers is complete may any actual data be written to the file. Once all the data is written, the file must be closed to force the headers to be written.
<p>
To append columns to a file, open on file for reading and a second for writing. Use the <a class="el" href="mmtzlib_8h.html#a6">mmtz_copy_headers</a>() function to copy the headers from the first to the second. Then add any additional column headers using <a class="el" href="mmtzlib_8h.html#a15">mmtz_add_column</a>(). Finally read the data a reflection at a time, fill in the additional columns and write the data. The resulting code looks like this: <div class="fragment"><pre>  <a class="code" href="structumtzfile__.html">mmtzfile</a> filein, fileout;
  <a class="code" href="structmmtz__column__.html">mmtz_column</a> col;
  <a class="code" href="structmmtz__crystal__.html">mmtz_crystal</a> xtl;
  <a class="code" href="structmmtz__dataset__.html">mmtz_dataset</a> set;
  <font class="keywordtype">int</font> fcol, pcol;

  filein  = <a class="code" href="mmtzlib_8h.html#a4">mmtz_open</a>( <font class="stringliteral">"old.mtz"</font>, <font class="stringliteral">"r"</font> );
  fileout = <a class="code" href="mmtzlib_8h.html#a4">mmtz_open</a>( <font class="stringliteral">"new.mtz"</font>, <font class="stringliteral">"w"</font> );
  <a class="code" href="mmtzlib_8h.html#a6">mmtz_copy_headers</a>( fileout, filein );
  \<font class="comment">/* get dataset and crystal for column 0 (i.e. H) *\/</font>
<font class="comment">  mmtz_get_column( filein, 1, &amp;col, &amp;set, &amp;xtl );</font>
<font class="comment">  strcpy( col.label, "FCAL" );    \</font><font class="comment">/* add an FCAL column *\/</font>
<font class="comment">  strcpy( col.type, "F" );</font>
<font class="comment">  fcol = mmtz_add_column( fileout, &amp;col, &amp;set, &amp;xtl );</font>
<font class="comment">  strcpy( col.label, "PHICAL" );  \</font><font class="comment">/* add an PHICAL column *\/</font>
<font class="comment">  strcpy( col.type, "P" );</font>
<font class="comment">  pcol = mmtz_add_column( fileout, &amp;col, &amp;set, &amp;xtl );</font>
<font class="comment">  for (i = 0; i&lt;mmtz_num_rows(filein); i++) {</font>
<font class="comment">    mmtz_get_row(filein, fdata, idata);</font>
<font class="comment">    fdata[ fcol ]   = 500.0;</font>
<font class="comment">    fdata[ pcol ] = 60.0;</font>
<font class="comment">    mmtz_add_row(fileout, fdata, idata);</font>
<font class="comment">  }</font>
<font class="comment">  mmtz_close( filein );</font>
  mmtz_close( fileout );</font></pre></div>
<p>
<hr><h2>Typedef Documentation</h2>
<a name="a1" doxytag="mmtzlib.h::mmtz_column"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
typedef struct <a class="el" href="structmmtz__column__.html">mmtz_column_</a> mmtz_column
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
data structure describing an MTZ column     </td>
  </tr>
</table>
<a name="a3" doxytag="mmtzlib.h::mmtz_crystal"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
typedef struct <a class="el" href="structmmtz__crystal__.html">mmtz_crystal_</a> mmtz_crystal
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
data structure describing an MTZ crystal     </td>
  </tr>
</table>
<a name="a2" doxytag="mmtzlib.h::mmtz_dataset"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
typedef struct <a class="el" href="structmmtz__dataset__.html">mmtz_dataset_</a> mmtz_dataset
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
data structure describing an MTZ dataset     </td>
  </tr>
</table>
<a name="a0" doxytag="mmtzlib.h::mmtzfile"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
typedef <a class="el" href="umtzlib_8h.html#a9">umtzfile</a> * mmtzfile
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
data structure for an MTZ file which is opened for input or output     </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a name="a15" doxytag="mmtzlib.h::mmtz_add_column"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int mmtz_add_column (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> <em>file</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const <a class="el" href="mmtzlib_8h.html#a1">mmtz_column</a> * <em>col</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const <a class="el" href="mmtzlib_8h.html#a2">mmtz_dataset</a> * <em>set</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const <a class="el" href="mmtzlib_8h.html#a3">mmtz_crystal</a> * <em>xtl</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
add column: supply column, dataset, crystal. dataset and crystal have their names checked in turn, and if they already exist the existing copies are used.  <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>file</em>
&nbsp;</td><td>
The mmtzfile to modify  </td></tr>
<tr><td valign=top><em>col</em>
&nbsp;</td><td>
Pointer to the MTZ column structure to be used </td></tr>
<tr><td valign=top><em>set</em>
&nbsp;</td><td>
Pointer to the MTZ dataset structure to be used </td></tr>
<tr><td valign=top><em>xtl</em>
&nbsp;</td><td>
Pointer to the MTZ crystal structure to be used </td></tr>
</table>
</dl><dl compact><dt>
<b>Returns: </b><dd>
The new column number </dl>    </td>
  </tr>
</table>
<a name="a21" doxytag="mmtzlib.h::mmtz_add_row"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void mmtz_add_row (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> <em>file</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
float * <em>fdata</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const int * <em>flags</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
write a new row of data to the file. Data will be marked as missing in the file if it has flags[col]=FALSE  <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>file</em>
&nbsp;</td><td>
The mmtzfile to modify  </td></tr>
<tr><td valign=top><em>fdata</em>
&nbsp;</td><td>
Array of floats holding a row of data </td></tr>
<tr><td valign=top><em>flags</em>
&nbsp;</td><td>
Array of ints holding a row of 'missing' flags </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a name="a17" doxytag="mmtzlib.h::mmtz_add_sort_header"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void mmtz_add_sort_header (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> <em>file</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const char * <em>sortorder</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
write sort order header to a new mtz: Writing the sort order header is an assertion that reflections will be supplied in the given order. This is not checked. Failure will lead to an invalid mtz. sortorder contains 3 chars, H, K and L, giving the names of the slow, medium and fast columns in order. (usually "HKL")  <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>file</em>
&nbsp;</td><td>
The mmtzfile to modify </td></tr>
<tr><td valign=top><em>sortorder</em>
&nbsp;</td><td>
A character array representing the sort order </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a name="a18" doxytag="mmtzlib.h::mmtz_add_syminf_header"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void mmtz_add_syminf_header (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> <em>file</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const int <em>nsym</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const int <em>nsymp</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const char <em>cellcode</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const int <em>ccp4_symbol</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const char * <em>hm_symbol</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const char * <em>pg_symbol</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
write spacegroup header to a new mtz file: Writing the syminf header is an assertion that you will later supply (nsym) symmetry operators to go with it. This is not checked. Failure will lead to an invalid mtz.  <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>file</em>
&nbsp;</td><td>
The mmtzfile to modify </td></tr>
<tr><td valign=top><em>nsym</em>
&nbsp;</td><td>
The number of symmetry operators </td></tr>
<tr><td valign=top><em>nsymp</em>
&nbsp;</td><td>
The number of primitive symmetry operators </td></tr>
<tr><td valign=top><em>cellcode</em>
&nbsp;</td><td>
The cell centering code (P/A/B/C/F/I/R/H) </td></tr>
<tr><td valign=top><em>ccp4_symbol</em>
&nbsp;</td><td>
The CCP4 spacegroup/setting number  </td></tr>
<tr><td valign=top><em>hm_symbol</em>
&nbsp;</td><td>
The Hermann--Maugnuin symbol for the spacegroup </td></tr>
<tr><td valign=top><em>pg_symbol</em>
&nbsp;</td><td>
The point group symbol for the spacegroup </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a name="a19" doxytag="mmtzlib.h::mmtz_add_symop_header"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void mmtz_add_symop_header (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> <em>file</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const char * <em>symop</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
write a symop header to a new mtz file: Note you must supply the same number of symops as were specified in the syminf header. e.g. "X+1/2, Y+1/2, Z" <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>file</em>
&nbsp;</td><td>
The mmtzfile to modify </td></tr>
<tr><td valign=top><em>symop</em>
&nbsp;</td><td>
The character representation of the symop </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a name="a5" doxytag="mmtzlib.h::mmtz_close"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void mmtz_close (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> <em>file</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
close a file for read/write (and write header if necessary). When reading a file this frees the data structures. When writing this actually writes the new MTZ header to the output file, so failure to close the file will lead to an unreadable file. <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>file</em>
&nbsp;</td><td>
The mmtzfile to close </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a name="a6" doxytag="mmtzlib.h::mmtz_copy_headers"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void mmtz_copy_headers (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> <em>dest</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const <a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> <em>src</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
copy headers from one file to another (for append)  <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>dest</em>
&nbsp;</td><td>
The target mmtzfile  </td></tr>
<tr><td valign=top><em>src</em>
&nbsp;</td><td>
The source mmtzfile </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a name="a12" doxytag="mmtzlib.h::mmtz_get_cell"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
float * mmtz_get_cell (
          </b></td>
          <td valign="bottom"><b>
const <a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> <em>file</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
float * <em>cell</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
get base cell  <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>file</em>
&nbsp;</td><td>
The mmtzfile to query </td></tr>
<tr><td valign=top><em>cell</em>
&nbsp;</td><td>
An array of at least 6 floats </td></tr>
</table>
</dl><dl compact><dt>
<b>Returns: </b><dd>
the float array containing the cell parameters </dl>    </td>
  </tr>
</table>
<a name="a14" doxytag="mmtzlib.h::mmtz_get_column"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int mmtz_get_column (
          </b></td>
          <td valign="bottom"><b>
const <a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> <em>file</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const int <em>icol</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="mmtzlib_8h.html#a1">mmtz_column</a> * <em>col</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="mmtzlib_8h.html#a2">mmtz_dataset</a> * <em>set</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="mmtzlib_8h.html#a3">mmtz_crystal</a> * <em>xtl</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
get column: Get the n'th column from the file, along with the dataset and crystal which correspond to that column. <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>file</em>
&nbsp;</td><td>
The mmtzfile to query  </td></tr>
<tr><td valign=top><em>icol</em>
&nbsp;</td><td>
The number of the MTZ column to be returned </td></tr>
<tr><td valign=top><em>col</em>
&nbsp;</td><td>
Pointer to the MTZ column structure to be filled </td></tr>
<tr><td valign=top><em>set</em>
&nbsp;</td><td>
Pointer to the MTZ dataset structure to be filled </td></tr>
<tr><td valign=top><em>xtl</em>
&nbsp;</td><td>
Pointer to the MTZ crystal structure to be filled </td></tr>
</table>
</dl><dl compact><dt>
<b>Returns: </b><dd>
The column number (i.e. icol) </dl>    </td>
  </tr>
</table>
<a name="a10" doxytag="mmtzlib.h::mmtz_get_num_symops"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int mmtz_get_num_symops (
          </b></td>
          <td valign="bottom"><b>
const <a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> <em>file</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
get number of symops  <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>file</em>
&nbsp;</td><td>
The mmtzfile to query  </td></tr>
</table>
</dl><dl compact><dt>
<b>Returns: </b><dd>
The number of symmetry operators in the file </dl>    </td>
  </tr>
</table>
<a name="a20" doxytag="mmtzlib.h::mmtz_get_row"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void mmtz_get_row (
          </b></td>
          <td valign="bottom"><b>
const <a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> <em>file</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
float * <em>fdata</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
int * <em>flags</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
get the next row of data from the file. If data is present, it is marked with flags[col]=TRUE, if it is missing flags[col]=FALSE  <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>file</em>
&nbsp;</td><td>
The mmtzfile to query </td></tr>
<tr><td valign=top><em>fdata</em>
&nbsp;</td><td>
Array of floats large enough to hold a row of data </td></tr>
<tr><td valign=top><em>flags</em>
&nbsp;</td><td>
Array of ints large enough to hold a row of 'missing' flags </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a name="a13" doxytag="mmtzlib.h::mmtz_get_setxtl"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void mmtz_get_setxtl (
          </b></td>
          <td valign="bottom"><b>
const <a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> <em>file</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const int <em>icol</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="mmtzlib_8h.html#a2">mmtz_dataset</a> * <em>set</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="mmtzlib_8h.html#a3">mmtz_crystal</a> * <em>xtl</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
get dataset and crystal info  <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>file</em>
&nbsp;</td><td>
The mmtzfile to query </td></tr>
<tr><td valign=top><em>icol</em>
&nbsp;</td><td>
The number of the dataset and crystal to be returned </td></tr>
<tr><td valign=top><em>set</em>
&nbsp;</td><td>
Pointer to the MTZ dataset structure to be filled </td></tr>
<tr><td valign=top><em>xtl</em>
&nbsp;</td><td>
Pointer to the MTZ crystal structure to be filled </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a name="a11" doxytag="mmtzlib.h::mmtz_get_symop"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
char * mmtz_get_symop (
          </b></td>
          <td valign="bottom"><b>
const <a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> <em>file</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const int <em>isym</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
char * <em>symop</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
get n'th symops  <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>file</em>
&nbsp;</td><td>
The mmtzfile to query  </td></tr>
<tr><td valign=top><em>isym</em>
&nbsp;</td><td>
The number of the symmetry operator to be returned </td></tr>
<tr><td valign=top><em>symop</em>
&nbsp;</td><td>
A character array or at least 72 characters </td></tr>
</table>
</dl><dl compact><dt>
<b>Returns: </b><dd>
the character string describing the isym'th symmetry operator </dl>    </td>
  </tr>
</table>
<a name="a16" doxytag="mmtzlib.h::mmtz_init_headers"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void mmtz_init_headers (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> <em>file</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const char * <em>title</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const float <em>cell</em>[6]&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
write the initial headers to a new MTZ  <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>file</em>
&nbsp;</td><td>
The mmtzfile to modify </td></tr>
<tr><td valign=top><em>title</em>
&nbsp;</td><td>
The title for the new MTZ file  </td></tr>
<tr><td valign=top><em>cell</em>
&nbsp;</td><td>
An array of 6 floats containing the cell parameters </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a name="a8" doxytag="mmtzlib.h::mmtz_num_cols"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int mmtz_num_cols (
          </b></td>
          <td valign="bottom"><b>
const <a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> <em>file</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
get number of columns  <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>file</em>
&nbsp;</td><td>
The mmtzfile to query  </td></tr>
</table>
</dl><dl compact><dt>
<b>Returns: </b><dd>
The number of columns in the file (including H, K, L) </dl>    </td>
  </tr>
</table>
<a name="a9" doxytag="mmtzlib.h::mmtz_num_datasets"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int mmtz_num_datasets (
          </b></td>
          <td valign="bottom"><b>
const <a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> <em>file</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
get number of columns  <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>file</em>
&nbsp;</td><td>
The mmtzfile to query  </td></tr>
</table>
</dl><dl compact><dt>
<b>Returns: </b><dd>
The number of datasets in the file </dl>    </td>
  </tr>
</table>
<a name="a7" doxytag="mmtzlib.h::mmtz_num_rows"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int mmtz_num_rows (
          </b></td>
          <td valign="bottom"><b>
const <a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> <em>file</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
get number of reflections  <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>file</em>
&nbsp;</td><td>
The mmtzfile to query  </td></tr>
</table>
</dl><dl compact><dt>
<b>Returns: </b><dd>
The number of rows (reflections) in the file </dl>    </td>
  </tr>
</table>
<a name="a4" doxytag="mmtzlib.h::mmtz_open"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
<a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> mmtz_open (
          </b></td>
          <td valign="bottom"><b>
const char * <em>filename</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const char * <em>mode</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
open a file for read/write (and read headers if necessary) <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>filename</em>
&nbsp;</td><td>
The filename/path of the MTZ file </td></tr>
<tr><td valign=top><em>mode</em>
&nbsp;</td><td>
"r" for read or "w" for write </td></tr>
</table>
</dl><dl compact><dt>
<b>Returns: </b><dd>
The mmtzfile object </dl>    </td>
  </tr>
</table>
<a name="a22" doxytag="mmtzlib.h::mmtz_seek_row"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void mmtz_seek_row (
          </b></td>
          <td valign="bottom"><b>
const <a class="el" href="mmtzlib_8h.html#a0">mmtzfile</a> <em>file</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const int <em>n</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
skip to the n'th row (reflection) in the file <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>file</em>
&nbsp;</td><td>
The mmtzfile to query </td></tr>
<tr><td valign=top><em>n</em>
&nbsp;</td><td>
The number of the row to go to </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<hr><address><small>Generated at Mon Jan 7 17:06:26 2002 by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.8.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
